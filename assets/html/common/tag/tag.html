<div class="page-header">
	<h1>
		素材及业务设置
		<small>
			<i class="ace-icon fa fa-angle-double-right"></i>
			标签
		</small>
	</h1>
</div>
<div ng-controller="TagController" class="row">
	<div class="col-xs-12">
		<p>
			<input type="text" class="new-ptag" ng-model="newPtagName">
			<button class="btn btn-sm btn-primary" ng-click="addTag(0, newPtagName)">创建一级标签</button>
		</p>
		<div ng-repeat="row in tags" class="row">
			<div ng-repeat="ptag in row" class="col-xs-12 col-sm-6 widget-container-col ui-sortable">
				<div class="table-header">
					{{ptag.tag_name}}
				</div>
				<table class="table table-striped table-bordered dataTable">
					<thead>
						<tr>
							<th>
								标签名
							</th>
							<th>
								创建日期
							</th>
							<th>
								操作
							</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="tag in ptag.tags">
							<td>
								{{tag.tag_name}}
							</td>
							<td>
								{{tag.created_at}}
							</td>
							<td>
								<div class="hidden-sm hidden-xs action-buttons">
									<!-- <a class="green" href="javascript:;">
										<i class="ace-icon fa fa-pencil bigger-130"></i>
									</a> -->
									<a ng-click="showDelConfirm(tag.id, tag.tag_name)" class="red" href="javascript:;">
										<i class="ace-icon fa fa-trash-o bigger-130"></i>
									</a>
								</div>
								
							</td>
						</tr>
					</tbody>
				</table>
				<div class="well well-sm action-buttons">
					<a ng-click="showNewTagInput(ptag.id)" class="purple" href="javascript:;">
						<i class="ace-icon fa fa-plus-circle bigger-130"></i>
					</a>
					<span ng-show="newTagInputShown[{{ptag.id}}]">
						<input type="text" ng-model="newTagName">
						<button ng-click="addTag(ptag.id, newTagName)" class="btn btn-sm btn-primary">确定</button>
						<button ng-click="newTagInputShown[ptag.id] = !newTagInputShown[ptag.id]" class="btn btn-default btn-sm">取消</button>
					</span>
					<a ng-click="showDelConfirm(ptag.id, ptag.tag_name)" class="red" href="javascript:;">
						<i class="ace-icon fa fa-trash-o bigger-130"></i>
					</a>
				</div>
			</div>
		</div>
	</div>
	<!-- 订阅标签-->
	<div class="col-xs-12">
		<p>
			<input type="text" class="new-ptag" ng-model="newTagName_sub">
			<button class="btn btn-sm btn-primary" ng-click="addTag_sub(0, newTagName_sub)">创建一级订阅标签</button>
		</p>
		<div ng-repeat="row in tags_sub" class="row">
			<div ng-repeat="ptag in row" class="col-xs-12 col-sm-6 widget-container-col ui-sortable">
				<div class="table-header">
					{{ptag.tag_name}}
				</div>
				<table class="table table-striped table-bordered dataTable">
					<thead>
						<tr>
							<th>
								标签名
							</th>
							<th>
								创建日期
							</th>
							<th>
								操作
							</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="tag in ptag.tags">
							<td>
								{{tag.tag_name}}
							</td>
							<td>
								{{tag.created_at}}
							</td>
							<td>
								<div class="hidden-sm hidden-xs action-buttons">
									<!-- <a class="green" href="javascript:;">
										<i class="ace-icon fa fa-pencil bigger-130"></i>
									</a> -->
									<a ng-click="showDelConfirm(tag.id, tag.tag_name)" class="red" href="javascript:;">
										<i class="ace-icon fa fa-trash-o bigger-130"></i>
									</a>
								</div>
								
							</td>
						</tr>
					</tbody>
				</table>
				<div class="well well-sm action-buttons">
					<a ng-click="showNewTagInput_sub(ptag.id)" class="purple" href="javascript:;">
						<i class="ace-icon fa fa-plus-circle bigger-130"></i>
					</a>
					<span ng-show="newTagInputShown_sub[{{ptag.id}}]">
						<input type="text" ng-model="newTagName_sub">
						<button ng-click="addTag_sub(ptag.id, newTagName_sub)" class="btn btn-sm btn-primary">确定</button>
						<button ng-click="newTagInputShown_sub[ptag.id] = !newTagInputShown_sub[ptag.id]" class="btn btn-default btn-sm">取消</button>
					</span>
					<a ng-click="showDelConfirm(ptag.id, ptag.tag_name)" class="red" href="javascript:;">
						<i class="ace-icon fa fa-trash-o bigger-130"></i>
					</a>
				</div>
			</div>
		</div>
	</div>
	<script type="text/ng-template" id="delConfirmModal.html">
		<div class="modal-body">
			<button ng-click="cancel()" type="button" class="close" >
			×
			</button>
			<div class="bootbox-body">
				确定删除标签：{{tagName}}？
			</div>
		</div>
		<div class="modal-footer">
			<button ng-click="cancel()" type="button" class="btn btn-default">
			取消	
			</button>
			<button ng-click="ok()" type="button" class="btn btn-primary">
			确定
			</button>
		</div>
	</script>
</div>